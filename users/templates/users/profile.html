{% extends "website/base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}
    <div id="profile-container">
      <div class="media">
        {% if "default" in user.profile.image.url %}
            <img class="rounded-circle account-img" src="https://res.cloudinary.com/lewismd/image/upload/v1690812491/default_i27az4.jpg">
        {% else %}
            <img class="rounded-circle account-img" src="{{ user.profile.image.url }}" alt="profile picture">
        {% endif %}    
        <div class="media-body">
          <h2 class="account-heading">{{ user.first_name }} {{ user.last_name }}</h2>
          <h3>Profile Info</h3>
          <p>Username: {{ user.username }}</p>
          <p>Email: {{ user.email }}</p>
        </div>
        <div><a href="{% url 'reservation-user-list' %}">Click here to see your upcoming court reservations</a></div>
      </div>
      <button class="btn green-button my-3" id="update-button">Edit Profile</button>
      <div id="profile-form-container">
        <form method="POST" enctype="multipart/form-data" id="update-form">
          {% csrf_token %}
          <fieldset class="form-group">
              <legend class="border-bottom mb-4">Edit Profile Details</legend>
              {{ u_form|crispy }}
              {{ p_form|crispy }}
          </fieldset>
          <div class="form-group">
              <button class="btn green-button my-3" type="submit">Update</button>
              <p class="btn btn-secondary my-3" id="update-cancel-button">Cancel</p>
          </div>
        </form>
      </div>
    </div>
{% endblock content %}

{% block scripts %}
<script src="{% static 'js/profile.js' %}"></script>
{% endblock scripts %}